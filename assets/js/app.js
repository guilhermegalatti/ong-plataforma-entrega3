import { Router } from './router.js';import { $, render } from './ui.js';import { HomeView, ProjetosView, CadastroView } from './templates.js';import { Store } from './store.js';import { showToast } from './components/Toast.js';import { openModal } from './components/Modal.js';import { bindCadastroForm } from './form.js';
function bindHomeInteractions(root){const btn=root.querySelector('[data-open-modal]');if(btn){btn.addEventListener('click',()=>openModal('Transparência','Relatórios públicos e indicadores de impacto.'))}}
function bindProjetosInteractions(root){root.querySelectorAll('[data-filter]').forEach(b=>{b.addEventListener('click',()=>{const cat=b.getAttribute('data-filter');const list=Store.filterProjects(cat);const app=$('#app');render(app,ProjetosView(list));bindProjetosInteractions(app);showToast(`Filtro: ${cat}`);});});root.querySelectorAll('[data-support]').forEach(btn=>{btn.addEventListener('click',()=>showToast('Obrigado pelo apoio!'))})}
function bindCadastroInteractions(root){bindCadastroForm(root)}
export function bootstrap(){Store.init();const app=$('#app');const router=new Router({routes:{'/':()=>{render(app,HomeView());bindHomeInteractions(app)},'/projetos':()=>{const list=Store.projects();render(app,ProjetosView(list));bindProjetosInteractions(app)},'/cadastro':()=>{render(app,CadastroView());bindCadastroInteractions(app)},'/404':()=>{render(app,'<section class=hero><h1>Não encontrado</h1></section>')}},fallback:()=>render(app,'<section class=hero><h1>Carregando...</h1></section>')});document.body.addEventListener('click',e=>{const a=e.target.closest('[data-nav]');if(a){e.preventDefault();location.hash=a.getAttribute('data-nav')}});router.resolve();}